$dso-accordion-main-color: #8b4a6a;
$dso-accordion-border-radius: #{$u2 / 2};
$dso-accordion-main-padding: $u2;
$dso-accordion-chevron-icon-size: $u2;
$dso-accordion-chevron-space: $dso-accordion-chevron-icon-size + $dso-accordion-main-padding;
$dso-accordion-handle-height: $u6;
$dso-accordion-state-icon-size: $u3;

.dso-accordion {
  &:not(.dso-no-top-border) .dso-accordion-section:first-child,
  .dso-accordion-section + .dso-accordion-section {
    margin-top: #{$u1 / 2};
  }

  .dso-section-handle {
    background-color: $wit;
    border-radius: 0 0 $dso-accordion-border-radius $dso-accordion-border-radius;
    font-weight: 500;
    padding: 0 $dso-accordion-main-padding;
    position: relative;

    a {
      @extend %is-h3;
      color: $dso-accordion-main-color;
      display: inline-block;
      line-height: $dso-accordion-handle-height;
      padding-left: $dso-accordion-chevron-space;
      word-break: break-word;

      &::before {
        @include icon($dso-icon-button-icon-chevron-down-purple-16x16);
        background-size: $dso-accordion-chevron-icon-size;
        height: $dso-accordion-chevron-icon-size;
        margin-left: -$dso-accordion-chevron-space;
        margin-right: $dso-accordion-main-padding;
        width: $dso-accordion-chevron-icon-size;
      }

      &::after {
        position: absolute;
        right: $u2;
        top: ($dso-accordion-handle-height - $dso-accordion-state-icon-size) / 2;
      }

      &:hover,
      &:focus,
      &.focus,
      &:active,
      &.active {
        color: $dso-accordion-main-color;
        text-decoration: none;
      }
    }
  }

  .dso-accordion-section {
    border: 1px solid $dso-accordion-main-color;
    border-radius: $dso-accordion-border-radius;
    overflow: hidden;

    &.dso-success {
      .dso-section-handle {
        a {
          @include di-check($size: $dso-accordion-state-icon-size, $pseudo: "after");
        }
      }
    }

    &.dso-danger {
      .dso-section-handle {
        a {
          @include di-cross($size: $dso-accordion-state-icon-size, $pseudo: "after");
        }
      }
    }

    &.dso-warning {
      .dso-section-handle {
        a {
          @include di-warning($size: $dso-accordion-state-icon-size, $pseudo: "after");
        }
      }
    }

    &.dso-info {
      .dso-section-handle {
        a {
          @include di-info($size: $dso-accordion-state-icon-size, $pseudo: "after");
        }
      }
    }

    &.dso-open {
      > .dso-section-handle {
        background-color: $dso-accordion-main-color;
        border-radius: 0 0 $dso-accordion-border-radius $dso-accordion-border-radius;

        a {
          color: $wit;

          &::before {
            background-image: url($dso-icon-button-icon-chevron-up-white-16x16);
          }
        }
      }
    }

    &:not(.dso-open) {
      .dso-section-body {
        display: none;
      }
    }
  }

  .dso-section-body {
    padding: $u2 $u2 $u4;

    .dso-section-body {
      padding: $u2;
    }
  }
}
