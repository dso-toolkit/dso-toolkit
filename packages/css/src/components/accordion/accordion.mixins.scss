@use "@dso-toolkit/sources/src/variables/colors";

@use "../../di";
@use "accordion.variables" as css-accordion-variables;

@mixin default {
  .dso-section-handle {
    background-color: colors.$wit;
    border: 1px solid css-accordion-variables.$default-border-color;
    border-radius: css-accordion-variables.$border-radius;

    a,
    button {
      color: css-accordion-variables.$default-color;

      &::before {
        @include di.base("chevron-down-mauve");
      }

      &:hover,
      &:active,
      &.active {
        color: css-accordion-variables.$default-color;
      }
    }
  }

  .dso-accordion-section {
    &.dso-open {
      &:not(.dso-nested-accordion) {
        > .dso-section-handle {
          background-color: css-accordion-variables.$default-nested-handle-bgcolor;
          border-radius: css-accordion-variables.$border-radius;

          a,
          button {
            color: colors.$wit;

            &::before {
              @include di.variant("chevron-up-wit");
            }

            dso-attachments-counter {
              --dso-attachments-counter-color: #{colors.$wit};
            }

            .dso-attachments {
              color: colors.$wit;

              &::after {
                @include di.variant("paperclip-wit");
              }
            }
          }
        }
      }

      &.dso-nested-accordion {
        background-color: css-accordion-variables.$default-nested-body-bgcolor;

        > .dso-section-handle {
          a,
          button {
            &::before {
              @include di.variant("chevron-up-mauve");
            }
          }
        }
      }
    }
  }

  .dso-section-body {
    border: 1px solid css-accordion-variables.$default-border-color;
    border-radius: 0 0 css-accordion-variables.$border-radius css-accordion-variables.$border-radius;
  }
}

@mixin conclusion {
  .dso-section-handle {
    background-color: css-accordion-variables.$conclusion-bgcolor;
    border: 1px solid css-accordion-variables.$conclusion-border-color;

    a,
    button {
      color: css-accordion-variables.$conclusion-color;

      &::before {
        @include di.base("chevron-down-grijs90");
      }

      &:hover,
      &:active,
      &.active {
        background-color: css-accordion-variables.$conclusion-hover-bgcolor;
        color: css-accordion-variables.$conclusion-color;
      }
    }
  }

  .dso-accordion-section {
    &.dso-open {
      &:not(.dso-nested-accordion) {
        > .dso-section-handle {
          background-color: css-accordion-variables.$conclusion-nested-handle-bgcolor;

          a,
          button {
            color: css-accordion-variables.$conclusion-color;

            &::before {
              @include di.variant("chevron-up-grijs90");
            }

            dso-attachments-counter {
              --dso-attachments-counter-color: #{colors.$grijs-60};
            }

            .dso-attachments {
              color: colors.$grijs-60;

              &::after {
                @include di.variant("paperclip-grijs");
              }
            }
          }
        }
      }

      &.dso-nested-accordion {
        background-color: css-accordion-variables.$conclusion-nested-body-bgcolor;
        border: 2px solid css-accordion-variables.$conclusion-border-color;

        > .dso-section-handle {
          a,
          button {
            &::before {
              @include di.variant("chevron-up-grijs90");
            }
          }
        }
      }
    }
  }

  .dso-section-body {
    border: 2px solid css-accordion-variables.$conclusion-border-color;
  }
}

@mixin compact {
  .dso-section-handle {
    border: 1px solid transparent;

    a,
    button {
      color: css-accordion-variables.$compact-color;

      &::before {
        @include di.base("chevron-down-grasgroen");
      }

      &:hover,
      &:active,
      &.active {
        color: css-accordion-variables.$compact-color;
      }
    }
  }

  .dso-accordion-section {
    &,
    .dso-section-body {
      border: 0;
      border-top: 1px solid css-accordion-variables.$compact-border-color;
    }

    &:last-child {
      border-bottom: 1px solid css-accordion-variables.$compact-border-color;
    }

    + .dso-accordion-section {
      margin-top: 0;
    }

    .dso-section-body {
      margin-top: 0;
    }

    &.dso-open {
      &:not(.dso-nested-accordion) {
        > .dso-section-handle {
          background-color: transparent;

          a,
          button {
            color: css-accordion-variables.$compact-color;

            &:hover,
            &:active,
            &.active {
              color: css-accordion-variables.$compact-color;
            }

            &::before {
              @include di.variant("chevron-up-grasgroen");
            }

            dso-attachments-counter {
              --dso-attachments-counter-color: #{colors.$grijs-60};
            }

            .dso-attachments {
              color: colors.$grijs-60;

              &::after {
                @include di.variant("paperclip-grijs");
              }
            }
          }
        }
      }

      &.dso-nested-accordion {
        > .dso-section-handle {
          a,
          button {
            &::before {
              @include di.variant("chevron-up-grasgroen");
            }
          }
        }

        > .dso-section-body {
          padding-bottom: 0;

          .dso-accordion-section:last-child {
            border-bottom: 0;
          }
        }
      }
    }
  }
}
