$dso-search-bar-height: $ru5;
$dso-search-bar-invalid-input-border-color: $dso-danger-color;
$dso-search-bar-focus-border-width: 1px;
$dso-search-icon-top: $ru4;

.dso-search-bar {
  display: flex;
  margin-bottom: 16px;

  .dso-search-bar-input {
    position: relative;
    width: 100%;

    .dso-search-icon {
      bottom: $u1;
      font-size: 0;
      height: $dso-search-bar-height;
      left: 0;
      line-height: $dso-search-bar-height;
      padding: $u1;
      position: absolute;
      text-align: center;
      top: 0;
      width: $dso-search-bar-height;
      z-index: $zx-searchbar-icon;

      &::before {
        @include di("search");

        content: "";
        display: inline-block;
        font-size: 1rem;
      }

      + input,
      + dso-autosuggest > input {
        padding-left: $dso-search-bar-height;
      }
    }

    input {
      @include placeholder($input-color-placeholder);

      background-color: $wit;
      background-image: none;
      border: 1px solid $dso-form-control-focus-border-color;
      border-radius: 4px;
      border-width: 1px;
      box-shadow: none;
      display: block;
      font-size: $dso-font-size-base;
      height: $dso-search-bar-height;
      line-height: $dso-search-bar-height;
      padding: 6px $dso-search-bar-height 6px $u1;
      transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
      width: 100%;

      &:focus {
        border-color: $dso-form-control-focus-border-color;
        box-shadow: inset 0 0 0 $dso-form-control-focus-border-width $dso-form-control-focus-border-color;
        outline: 0;
      }

      &::-ms-clear {
        display: none;
      }
    }

    button {
      background-color: transparent;
      border: 0;
      box-shadow: none;
      color: $grasgroen;
      font-size: 0;
      height: $dso-search-bar-height;
      padding: $u1;
      position: absolute;
      right: 0;
      text-align: center;
      top: 0;
      width: $dso-search-bar-height;

      &::before {
        @include di("times");

        content: "";
        display: inline-block;
        font-size: $dso-font-size-base;
      }
    }

    label {
      flex-grow: 1;
      margin-bottom: $u1;
      width: 100%;

      + .dso-search-icon {
        top: $dso-search-icon-top;

        + input,
        + dso-autosuggest {
          + button {
            top: $dso-search-icon-top;
          }
        }
      }

      + input,
      + dso-autosuggest {
        + button {
          top: $dso-search-icon-top;
        }
      }

      &.sr-only,
      &.dso-search-icon {
        + .dso-search-icon {
          top: 0;

          + input,
          + dso-autosuggest {
            + button {
              top: 0;
            }
          }
        }

        + input,
        + dso-autosuggest {
          + button {
            top: 0;
          }
        }
      }
    }
  }

  .dso-search-bar-input + button {
    align-self: flex-end;
    height: $dso-search-bar-height;
    line-height: calc($dso-search-bar-height - 2px);
    margin: 0 0 0 $u1;
    min-width: initial;
    padding: 0 $u2;
    text-align: center;
  }

  + .dso-results {
    color: $grijs-60;
    font-weight: 700;
    margin-top: $u1;
  }

  &.dso-invalid .dso-search-bar-input input {
    border-color: $dso-search-bar-invalid-input-border-color;

    &:focus {
      box-shadow: inset 0 0 0 $dso-search-bar-focus-border-width $dso-search-bar-invalid-input-border-color;
    }
  }
}
