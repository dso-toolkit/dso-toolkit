language: node_js
node_js:
- '10'
install:
- gem install percy-cli
- npm install
jobs:
  include:
  - name: Topic branch
    if: branch =~ /^#/ && type = push
    script:
    # - npm run lint
    # - npm run build
    # - npm run test
    # - mv build dist
    - ssh -p ${DEPLOY_PORT} ${DEPLOY_USER}@${DEPLOY_HOST} mkdir hello
    after_success:
    - echo "run percy"
before_install:
- openssl aes-256-cbc -K $encrypted_a2be20f3e463_key -iv $encrypted_a2be20f3e463_iv
  -in deploy_rsa.enc -out deploy_rsa -d
- eval "$(ssh-agent -s)"
- chmod 600 deploy_rsa
- ssh-add deploy_rsa
- echo -e "Host ${DEPLOY_HOST}\n\tStrictHostKeyChecking no\n" >> ~/.ssh/config
env:
  global:
  - secure: HURnv6R8pwP6c1e3cuoDm/lqhLou0wNmODAWPz+DiWt4AhTuzBzFzEhKK5jwlVJN03yAW8M9LimrUPsrTwQrNX1FhahJWa13naOJYhekLBVpK9fXXjT2be8krCcSURMIXni/xI26SepumU4cH9xwAX0bYwp0ddfkd3ssghOAcoMBpcDVIe43R/gJupP1X3of7KGRLi9SR4m/0cvoWXZm94BEXGaiU1hYibWd7jebjxZACYrGhrEbhI3lmfE1jPxByW+dcvGYPwYpM4/9d14ZfFSBwYMweibB5IHcCcY4fPy132CnWhnRrz4u8/G3doNKNUVBqQuZOQOftvVcivOCGgdOKtvFkSq94abOwuE+bClKEBWEZC4iGJF4327a2ZqsNDk9PRN9GxvinUpu0MwNKcQLaTtIMzpRRGfkDtR10PvLP0CySegdfaHEQlOn9xXTRjnCOmRhaSDtu9sCDpEHlRU21jM/+6gcV5IWwWuzmZmlkM21F/jAt/0IFeRJbJ75u1FbEcmPIif7ILB0Nq6XtJSxoPCD4S/LbjPMLRgcGfBvjoHn5iiFMAPrZ48sMd+hyyt5Qtq55dMXr7EHx+MQe64pp/oJDL2Ze00Vc7wBZBR9cldqpk9KECiw2YCyL4hoMhR+7YYTWkVMnMvTVErtDVT7htC8ApRC5Hg8BuWSgyA=
  - secure: WsUvT88U04gNqDOpd15gD2w7TIICpusxOq52oJKpGE64n+O8WmRBDPm8R/NAtf2Y/k47Op3h7B9fNC+ayYrszcz8fc3sUy+6RzMJszM/FlxAOCFUHKNGtOGmfH+HNI6sVB685NI+DivVMIajIugZlh6zWkKkH/s+vZkqmCwoOLLxJ1ZB/ijQYL0TgJ5u70vDKPRanHjk9CiuL3X7Gr8JV7Un3yQAsBKAzFqSmLoLfPz0zKmPtF7Xwtxk1iphQ7mQ5SxI6SEi4dQ3HGRZCie/Yeogg0xu0ZHVkR4N45MfCh5PrjgbYsx5smNKAfWfQ6ojL3kPzMgvbpqeCDJux7vW3bcIIecRz0hXql482/R2gzQ1HcZyA5Bkysd6z8nnCeVnSj7CraQPZXT443VdJCnnLtmS0Vn2LVqVnKQbpWbGpXkVI/NmFXF4vIs1tEcp3SyDOtdccbN5GeJlUqhxMo+mXSSYDpqE7TOFxGzftx333HNJfKtG6mMPf3pM+MCZbQwEF7CtOzi6WGLHqcvuF1N/rbST8nHhEJwVMkEBSzb3TUo3vT1cDnst+2WQqqfxvQcU8xP/HfKjso1A45wiNV6I7Gde58h11NL88a26O/I9grtICRMNgJe5Aiti2UTJ6ZgGCljsXr0LVaLMrD1h4uYdrL0KDxbupTYimDpPdDtYhvw=
  - secure: Ndk1chiFeIAjrX44TvcXrnJ4ShJXpw3UXViiEnp7LO6FAnssPSmS94658S63uNk8O+K2D4OlAG2F4G7ZciPF3tS9JKAuByEw6uZVliEQcgFxxOhtuWFjewAE6WgGSLQ1qsW+RkBwQKaFZhvmI8iNsxdkQQpPra7sfBobDnPaUbvdpiM+r6ERgh3vr+u97G6uG9Y59wxQsNt2Q344wM7wcA6teWPv1oVfLj/7TIY1muVLrl8tyrG5TcosLIV9cetfQ50CGILRdBaPi45SE57lZSJFI4zeKC7vPmYAxGSCx2PifH0I107BziT9ceTXWhOKz9Fr5vqY0BxS3KM6g84bcovLJyAIjKkIFQZSO6F/26ONALlAoeJeEQvYZW2fKXwOTPHltsRH2YVZVUEmwQAHn0UwncqXQ7iwwABJZwm1cHhrzUguIx8SFRksfcTtjOGWzLeaebeds1WcCTStvgQNcT/zrhrkheZXWswaFo4u37tCBDQ2LJ/PezvGkq9AG2Gz/CZ3FZFw28RGZkzjC3cCC24bTTwch4RoAsz8tvq5PpS/YC8trLMbPvSEwEt2uGQR8zr7CyaPju25hEhrG4s+c7F5ufWe9HDKFFgsdXYleu2O56Cryz8ri2OFNk98yz3SnopcVOJVEUwV1QPL//AcIppQSP1eXkH47gH84D2UP8Q=
