language: node_js
node_js:
  - "10"
install:
  - gem install percy-cli
  - npm install
jobs:
  include:
    - name: "Topic branch"
      if: branch =~ /^#/ && type = push
      script:
        - npm run lint
        - npm run build
        - npm run test
        - mv build dist
        - echo "deploy topic branch to web"
      after_success:
        - echo "run percy"
        # - percy snapshot --widths "380,780,1024,1280" --snapshots_regex "components\/preview\/((?!--).)+\.html$" dist/library/
